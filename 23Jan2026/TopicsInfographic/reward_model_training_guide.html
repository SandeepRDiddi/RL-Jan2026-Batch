<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reward Model Training & RLHF Optimization - Visual Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #0891b2;
            --primary-dark: #0e7490;
            --primary-light: #06b6d4;
            --accent: #f59e0b;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #eab308;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-800: #1f2937;
            --gray-900: #111827;
            --bg: #0f172a;
            --surface: #1e293b;
            --surface-light: #ffffff;
            --text: #1f2937;
            --text-light: #6b7280;
        }

        body {
            font-family: 'Segoe UI', 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, var(--bg) 0%, #1a1f3a 100%);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1500px;
            margin: 0 auto;
        }

        /* Header */
        header {
            text-align: center;
            margin-bottom: 70px;
            animation: fadeInDown 0.8s ease-out;
        }

        h1 {
            font-size: 3.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 50%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            letter-spacing: -1px;
        }

        .subtitle {
            font-size: 1.2rem;
            color: var(--text-light);
            max-width: 800px;
            margin: 0 auto;
        }

        /* Sections */
        .section {
            background: var(--surface-light);
            border-radius: 16px;
            padding: 50px;
            margin-bottom: 60px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            animation: fadeInUp 0.8s ease-out both;
        }

        .section:nth-child(2) { animation-delay: 0.2s; }
        .section:nth-child(3) { animation-delay: 0.3s; }
        .section:nth-child(4) { animation-delay: 0.4s; }
        .section:nth-child(5) { animation-delay: 0.5s; }

        h2 {
            font-size: 2.8rem;
            margin-bottom: 40px;
            color: var(--gray-900);
            text-align: center;
            position: relative;
            padding-bottom: 20px;
        }

        h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-light), #8b5cf6);
            border-radius: 2px;
        }

        h3 {
            font-size: 1.5rem;
            color: var(--gray-900);
            margin-bottom: 20px;
            margin-top: 30px;
        }

        /* Reward Model Concept */
        .rm-concept {
            background: linear-gradient(135deg, #e0f2fe 0%, #dbeafe 100%);
            padding: 30px;
            border-radius: 12px;
            border-left: 4px solid var(--primary-light);
            margin-bottom: 30px;
        }

        .formula-box {
            background: white;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Monaco', 'Courier New', monospace;
            color: var(--primary-dark);
            margin: 15px 0;
            border-left: 3px solid var(--primary);
            overflow-x: auto;
            font-size: 0.95rem;
        }

        /* Preference Visualization */
        .preference-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-top: 30px;
        }

        @media (max-width: 1000px) {
            .preference-grid {
                grid-template-columns: 1fr;
            }
        }

        .preference-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }

        .preference-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .pref-header {
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary) 100%);
            color: white;
            padding: 20px;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .pref-content {
            padding: 25px;
        }

        .pref-section {
            margin-bottom: 20px;
        }

        .pref-section:last-child {
            margin-bottom: 0;
        }

        .pref-label {
            font-weight: 700;
            color: var(--primary-dark);
            font-size: 0.85rem;
            text-transform: uppercase;
            margin-bottom: 8px;
            letter-spacing: 0.5px;
        }

        .pref-text {
            color: var(--text);
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .preferred {
            border-left: 4px solid var(--success);
            padding-left: 15px;
        }

        .dispreferred {
            border-left: 4px solid var(--danger);
            padding-left: 15px;
            color: var(--text-light);
        }

        /* Bradley-Terry Visualization */
        .bt-visualization {
            background: linear-gradient(135deg, #f3e8ff 0%, #ede9fe 100%);
            padding: 30px;
            border-radius: 12px;
            border-left: 4px solid #8b5cf6;
            margin-top: 30px;
        }

        .sigmoid-curve {
            width: 100%;
            height: 300px;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            position: relative;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        /* Training Dynamics Table */
        .training-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 30px;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        .training-table thead {
            background: linear-gradient(135deg, var(--primary-light), var(--primary));
            color: white;
        }

        .training-table th {
            padding: 16px 20px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .training-table td {
            padding: 16px 20px;
            border-bottom: 1px solid var(--gray-200);
            font-size: 0.95rem;
        }

        .training-table tbody tr:hover {
            background: var(--gray-50);
        }

        .training-table tbody tr:last-child td {
            border-bottom: none;
        }

        /* Cell styling for training table */
        .metric-good {
            color: var(--success);
            font-weight: 600;
        }

        .metric-warning {
            color: var(--warning);
            font-weight: 600;
        }

        .metric-neutral {
            color: var(--text-light);
        }

        /* Progress Bar */
        .progress-bar {
            background: var(--gray-200);
            border-radius: 8px;
            height: 12px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-light), var(--primary));
            border-radius: 8px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(6, 182, 212, 0.5);
        }

        /* Elo Ranking System */
        .elo-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .elo-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            border-top: 4px solid var(--primary);
            transition: all 0.3s ease;
        }

        .elo-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .elo-rating {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .model-name {
            font-weight: 700;
            color: var(--gray-900);
            font-size: 1.1rem;
            margin-bottom: 15px;
        }

        .elo-stat {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .elo-stat strong {
            color: var(--gray-900);
        }

        .elo-change {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            padding: 10px;
            border-radius: 8px;
            margin-top: 15px;
            text-align: center;
            font-weight: 700;
            color: var(--success);
        }

        /* PPO Training Results */
        .ppo-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .metric-card {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            padding: 25px;
            border-radius: 12px;
            border-left: 4px solid var(--success);
            text-align: center;
        }

        .metric-value {
            font-size: 2.2rem;
            font-weight: 800;
            color: var(--success);
            margin-bottom: 10px;
        }

        .metric-label {
            font-weight: 600;
            color: var(--text);
            font-size: 0.95rem;
        }

        .metric-change {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-top: 8px;
        }

        /* Interactive Charts */
        .chart-container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            position: relative;
            height: 400px;
        }

        .chart-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-light);
            font-style: italic;
        }

        /* SVG Chart Styling */
        .line-chart {
            width: 100%;
            height: 100%;
        }

        /* Step-by-Step Flow */
        .flow-diagram {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .flow-step {
            background: linear-gradient(135deg, var(--primary-light), var(--primary));
            color: white;
            padding: 20px;
            border-radius: 10px;
            flex: 1;
            min-width: 150px;
            text-align: center;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .flow-arrow {
            font-size: 2rem;
            color: var(--primary);
        }

        /* Comparison Matrix */
        .comparison-box {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid var(--primary);
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .comparison-box {
                grid-template-columns: 1fr;
            }
        }

        .comparison-item {
            padding: 15px;
            border-radius: 8px;
        }

        .comparison-item.better {
            background: #d1fae5;
            border-left: 3px solid var(--success);
        }

        .comparison-item.worse {
            background: #fee2e2;
            border-left: 3px solid var(--danger);
        }

        .comparison-label {
            font-weight: 700;
            color: var(--gray-900);
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .comparison-text {
            color: var(--text);
            font-size: 0.95rem;
        }

        /* Insight Boxes */
        .insight-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fef08a 100%);
            border-left: 4px solid var(--accent);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .insight-title {
            font-weight: 700;
            color: #92400e;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .insight-text {
            color: #92400e;
            font-size: 0.95rem;
        }

        /* Animation */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Tab Navigation */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--gray-200);
            flex-wrap: wrap;
        }

        .tab-button {
            padding: 12px 24px;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-light);
            transition: all 0.3s ease;
            font-size: 0.95rem;
        }

        .tab-button:hover {
            color: var(--primary);
        }

        .tab-button.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeInUp 0.3s ease;
        }

        /* Footer */
        footer {
            text-align: center;
            margin-top: 80px;
            padding: 30px;
            color: var(--text-light);
            animation: fadeInUp 0.8s ease-out 0.8s both;
        }

        /* Key Statistics Box */
        .stats-box {
            background: linear-gradient(135deg, #e0e7ff 0%, #f3e8ff 100%);
            padding: 30px;
            border-radius: 12px;
            border-left: 4px solid #8b5cf6;
            margin: 30px 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat {
            background: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border-top: 3px solid #8b5cf6;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 800;
            color: #8b5cf6;
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-top: 8px;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéØ Reward Model Training & RLHF Optimization</h1>
            <p class="subtitle">Understanding how LLMs learn human preferences and optimize for alignment through neural reward scoring</p>
        </header>

        <!-- Section 1: What is a Reward Model -->
        <section class="section">
            <h2>Section 1: What is a Reward Model?</h2>

            <div class="rm-concept">
                <h3>üß† The Core Idea</h3>
                <p>A Reward Model (RM) is a neural network that predicts human preference judgments. It maps a (prompt, response) pair to a single scalar score indicating the quality, helpfulness, and safety of that response.</p>
                
                <div class="formula-box">
r_RM(x, y) = W_final * f_transformer([prompt_tokens; response_tokens])
                </div>

                <p style="margin-top: 15px; color: var(--primary-dark);">
                    <strong>In Plain English:</strong><br>
                    Input the full prompt and response to a transformer (like GPT). Get embeddings. Pass through a final linear layer. Output: a single number that predicts "How much would humans prefer this response?"
                </p>
            </div>

            <div style="background: linear-gradient(135deg, #fef3c7 0%, #fef08a 100%); padding: 20px; border-radius: 8px; border-left: 4px solid var(--accent); margin-top: 25px;">
                <strong style="color: #92400e;">Key Insight:</strong>
                <p style="color: #92400e; margin-top: 8px; font-size: 0.95rem;">
                    The RM doesn't need to understand "why" a response is good. It just learns to predict: "Do humans prefer Response A or Response B?" This prediction ability is then used to optimize the main LLM policy.
                </p>
            </div>

            <div style="background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); padding: 25px; border-radius: 12px; margin-top: 25px; border-left: 4px solid var(--primary-light);">
                <h3 style="margin-top: 0; color: var(--primary-dark);">üìä Why This Architecture Works</h3>
                <ul style="margin-top: 15px; color: var(--primary-dark); list-style: none;">
                    <li style="margin: 10px 0;">‚úì <strong>Efficient:</strong> Train once on 5k-50k preference pairs, reuse to optimize entire LLM</li>
                    <li style="margin: 10px 0;">‚úì <strong>General:</strong> Single RM score captures multiple dimensions (safety, accuracy, helpfulness)</li>
                    <li style="margin: 10px 0;">‚úì <strong>Scalable:</strong> Can be applied to any new prompt-response pair</li>
                    <li style="margin: 10px 0;">‚úì <strong>Interpretable:</strong> Reward signal is transparent and auditable</li>
                </ul>
            </div>
        </section>

        <!-- Section 2: Preference Data -->
        <section class="section">
            <h2>Section 2: Human Preference Data Foundation</h2>

            <p style="margin-bottom: 30px; color: var(--text-light);">
                Domain experts compare response pairs and indicate preferences. This creates the training signal for the RM. Here are detailed pharmaceutical examples:
            </p>

            <div class="tabs">
                <button class="tab-button active" onclick="switchTab(event, 'pref-set-1')">Set 1: Dosing</button>
                <button class="tab-button" onclick="switchTab(event, 'pref-set-2')">Set 2-5</button>
                <button class="tab-button" onclick="switchTab(event, 'pref-set-6')">Set 6-10</button>
                <button class="tab-button" onclick="switchTab(event, 'pref-set-11')">Set 11-20</button>
            </div>

            <!-- Set 1 -->
            <div id="pref-set-1" class="tab-content active">
                <div class="preference-grid">
                    <div class="preference-card">
                        <div class="pref-header">üî¥ Preference Set 1: Dosing Guidance</div>
                        <div class="pref-content">
                            <div class="pref-section">
                                <div class="pref-label">Query</div>
                                <div class="pref-text">Patient on lisinopril (ACE inhibitor). eGFR drops from 45‚Üí32. Adjust dose?</div>
                            </div>
                        </div>
                    </div>

                    <div style="display: grid; gap: 15px;">
                        <div style="background: #d1fae5; padding: 20px; border-radius: 12px; border-left: 4px solid var(--success);">
                            <div style="font-weight: 700; color: var(--success); margin-bottom: 10px;">‚úÖ PREFERRED Response</div>
                            <div style="color: var(--text); font-size: 0.9rem; line-height: 1.7;">
                                Yes, reduce dose from 10mg daily to 5mg daily. Recheck eGFR in 1 week. Monitor K+ level (ACE inhibitor increases K+). Hold if K+ >5.5 mEq/L. Consider nephrology referral.
                            </div>
                            <div style="background: white; padding: 10px; border-radius: 6px; margin-top: 12px; font-size: 0.85rem; color: var(--text-light);">
                                ‚úì Specific dosing ‚úì Monitoring parameters ‚úì Safety thresholds
                            </div>
                        </div>

                        <div style="background: #fee2e2; padding: 20px; border-radius: 12px; border-left: 4px solid var(--danger);">
                            <div style="font-weight: 700; color: var(--danger); margin-bottom: 10px;">‚ùå DISPREFERRED Response</div>
                            <div style="color: var(--text); font-size: 0.9rem; line-height: 1.7;">
                                No change needed. ACE inhibitor is kidney-protective. Just monitor closely.
                            </div>
                            <div style="background: white; padding: 10px; border-radius: 6px; margin-top: 12px; font-size: 0.85rem; color: var(--text-light);">
                                ‚úó No dose adjustment ‚úó Ignores significant eGFR drop ‚úó Vague monitoring
                            </div>
                        </div>
                    </div>
                </div>

                <div class="insight-box">
                    <div class="insight-title">üí° Why Preferred?</div>
                    <div class="insight-text">
                        The preferred response shows clinical reasoning: recognizes eGFR 32 is concerning, specifies exact dose reduction, identifies the critical safety parameter (K+), and has concrete thresholds. It's actionable and safe.
                    </div>
                </div>
            </div>

            <!-- Set 2-5 -->
            <div id="pref-set-2" class="tab-content">
                <div class="preference-grid">
                    <div class="preference-card">
                        <div class="pref-header">üî¥ Set 2: Patient Safety</div>
                        <div class="pref-content">
                            <div class="pref-section">
                                <div class="pref-label">Query</div>
                                <div class="pref-text">My doctor prescribed amoxicillin but I had anaphylaxis before. Should I take it?</div>
                            </div>
                            <div class="pref-section preferred">
                                <div class="pref-label">‚úÖ Preferred</div>
                                <div class="pref-text">NO. If history of anaphylaxis to penicillin, avoid amoxicillin (cross-reactivity ~10%). Discuss alternatives with doctor immediately.</div>
                            </div>
                            <div class="pref-section dispreferred">
                                <div class="pref-label">‚ùå Dispreferred</div>
                                <div class="pref-text">Probably fine if you take antihistamine beforehand.</div>
                            </div>
                        </div>
                    </div>

                    <div class="preference-card">
                        <div class="pref-header">üî¥ Set 3: Drug Interaction</div>
                        <div class="pref-content">
                            <div class="pref-section">
                                <div class="pref-label">Query</div>
                                <div class="pref-text">On warfarin. Can I start aspirin for headache?</div>
                            </div>
                            <div class="pref-section preferred">
                                <div class="pref-label">‚úÖ Preferred</div>
                                <div class="pref-text">No. Aspirin + warfarin significantly increases bleeding. Use acetaminophen 500-1000mg instead. Contact pharmacist before adding any medication.</div>
                            </div>
                            <div class="pref-section dispreferred">
                                <div class="pref-label">‚ùå Dispreferred</div>
                                <div class="pref-text">One aspirin shouldn't matter.</div>
                            </div>
                        </div>
                    </div>

                    <div class="preference-card">
                        <div class="pref-header">üî¥ Set 4: Monitoring Emphasis</div>
                        <div class="pref-content">
                            <div class="pref-section">
                                <div class="pref-label">Query</div>
                                <div class="pref-text">Starting methotrexate for RA. What monitoring?</div>
                            </div>
                            <div class="pref-section preferred">
                                <div class="pref-label">‚úÖ Preferred</div>
                                <div class="pref-text">Monthly CBC, CMP, LFTs for first 3 months, then q8-12 weeks. Monitor for cytopenias, hepatotoxicity, pneumonitis.</div>
                            </div>
                            <div class="pref-section dispreferred">
                                <div class="pref-label">‚ùå Dispreferred</div>
                                <div class="pref-text">Don't need special monitoring, just take it.</div>
                            </div>
                        </div>
                    </div>

                    <div class="preference-card">
                        <div class="pref-header">üî¥ Set 5: Contraindication</div>
                        <div class="pref-content">
                            <div class="pref-section">
                                <div class="pref-label">Query</div>
                                <div class="pref-text">Metformin in eGFR 28?</div>
                            </div>
                            <div class="pref-section preferred">
                                <div class="pref-label">‚úÖ Preferred</div>
                                <div class="pref-text">Contraindicated. eGFR should be ‚â•30 for metformin. Risk of lactic acidosis. Alternatives: insulin, GLP-1, SGLT2i, sulfonylureas.</div>
                            </div>
                            <div class="pref-section dispreferred">
                                <div class="pref-label">‚ùå Dispreferred</div>
                                <div class="pref-text">Fine to use; just monitor kidney function.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Set 6-10 -->
            <div id="pref-set-6" class="tab-content">
                <div class="preference-grid">
                    <div class="preference-card">
                        <div class="pref-header">üî¥ Set 6: Pharmacogenomics</div>
                        <div class="pref-content">
                            <div class="pref-section">
                                <div class="pref-label">Query</div>
                                <div class="pref-text">CYP2D6 ultra-rapid metabolizer. Codeine effect?</div>
                            </div>
                            <div class="pref-section preferred">
                                <div class="pref-label">‚úÖ Preferred</div>
                                <div class="pref-text">Codeine ineffective. Rapidly converted to morphine then cleared. Try morphine, oxycodone, or tramadol directly.</div>
                            </div>
                            <div class="pref-section dispreferred">
                                <div class="pref-label">‚ùå Dispreferred</div>
                                <div class="pref-text">Codeine should work fine.</div>
                            </div>
                        </div>
                    </div>

                    <div class="preference-card">
                        <div class="pref-header">üî¥ Set 7: Mechanism</div>
                        <div class="pref-content">
                            <div class="pref-section">
                                <div class="pref-label">Query</div>
                                <div class="pref-text">Why ACE inhibitor + K-sparing diuretic cause hyperkalemia?</div>
                            </div>
                            <div class="pref-section preferred">
                                <div class="pref-label">‚úÖ Preferred</div>
                                <div class="pref-text">ACE inhibitors block angiotensin II ‚Üí less aldosterone ‚Üí kidney retains K+. Spironolactone blocks aldosterone ‚Üí K+ retention. Combined effect: significant hyperkalemia risk.</div>
                            </div>
                            <div class="pref-section dispreferred">
                                <div class="pref-label">‚ùå Dispreferred</div>
                                <div class="pref-text">They just do.</div>
                            </div>
                        </div>
                    </div>

                    <div class="preference-card">
                        <div class="pref-header">üî¥ Set 8: Pediatric Dosing</div>
                        <div class="pref-content">
                            <div class="pref-section">
                                <div class="pref-label">Query</div>
                                <div class="pref-text">Pediatric: 2-month-old (4kg) cephalexin at 25-50 mg/kg/day?</div>
                            </div>
                            <div class="pref-section preferred">
                                <div class="pref-label">‚úÖ Preferred</div>
                                <div class="pref-text">Cephalexin not recommended <1 year. Use cephalothin IV or amoxicillin. Amoxicillin 20-40 mg/kg/day = 80-160mg divided q6-8h.</div>
                            </div>
                            <div class="pref-section dispreferred">
                                <div class="pref-label">‚ùå Dispreferred</div>
                                <div class="pref-text">100mg daily divided in two doses.</div>
                            </div>
                        </div>
                    </div>

                    <div class="preference-card">
                        <div class="pref-header">üî¥ Set 9: Adverse Event</div>
                        <div class="pref-content">
                            <div class="pref-section">
                                <div class="pref-label">Query</div>
                                <div class="pref-text">Started losartan 3 days ago. Now dizzy on standing. Continue?</div>
                            </div>
                            <div class="pref-section preferred">
                                <div class="pref-label">‚úÖ Preferred</div>
                                <div class="pref-text">Common with ARBs. Continue but: (1) rise slowly, (2) increase salt/fluid, (3) check BP sitting + standing, (4) recheck electrolytes.</div>
                            </div>
                            <div class="pref-section dispreferred">
                                <div class="pref-label">‚ùå Dispreferred</div>
                                <div class="pref-text">Stop immediately; it's dangerous.</div>
                            </div>
                        </div>
                    </div>

                    <div class="preference-card">
                        <div class="pref-header">üî¥ Set 10: Pregnancy</div>
                        <div class="pref-content">
                            <div class="pref-section">
                                <div class="pref-label">Query</div>
                                <div class="pref-text">ACE inhibitor in pregnancy?</div>
                            </div>
                            <div class="pref-section preferred">
                                <div class="pref-label">‚úÖ Preferred</div>
                                <div class="pref-text">Contraindicated in 2nd/3rd trimester (fetal renal dysgenesis, oligohydramnios). 1st trimester risk less clear. Switch to methyldopa or labetalol.</div>
                            </div>
                            <div class="pref-section dispreferred">
                                <div class="pref-label">‚ùå Dispreferred</div>
                                <div class="pref-text">Category C, so it's fine.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Set 11-20 -->
            <div id="pref-set-11" class="tab-content">
                <div style="background: linear-gradient(135deg, #fef3c7 0%, #fef08a 100%); padding: 25px; border-radius: 12px; border-left: 4px solid var(--accent); margin-bottom: 30px;">
                    <h3 style="color: #92400e; margin-top: 0;">Additional Preference Sets (11-20)</h3>
                    <p style="color: #92400e; margin-top: 15px;">These follow the same pattern: expert-preferred responses focus on safety, specificity, and clinical reasoning.</p>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
                    <div style="background: white; padding: 20px; border-radius: 12px; border-left: 4px solid var(--primary); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);">
                        <strong style="color: var(--primary);">11. Grapefruit + Statin</strong><br>
                        <span style="color: var(--text-light); font-size: 0.9rem;">Preferred: Avoid grapefruit (CYP3A4 inhibition ‚Üí statin toxicity)</span>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 12px; border-left: 4px solid var(--primary); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);">
                        <strong style="color: var(--primary);">12. NSAIDs + Renal</strong><br>
                        <span style="color: var(--text-light); font-size: 0.9rem;">Preferred: Contraindicated in advanced kidney disease</span>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 12px; border-left: 4px solid var(--primary); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);">
                        <strong style="color: var(--primary);">13. Warfarin + Vitamin K</strong><br>
                        <span style="color: var(--text-light); font-size: 0.9rem;">Preferred: Consistency is key, not avoidance</span>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 12px; border-left: 4px solid var(--primary); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);">
                        <strong style="color: var(--primary);">14. Fluoroquinolones</strong><br>
                        <span style="color: var(--text-light); font-size: 0.9rem;">Preferred: Warn of tendon rupture risk</span>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 12px; border-left: 4px solid var(--primary); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);">
                        <strong style="color: var(--primary);">15. Polypharmacy</strong><br>
                        <span style="color: var(--text-light); font-size: 0.9rem;">Preferred: Recognize cumulative cognitive decline risk</span>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 12px; border-left: 4px solid var(--primary); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);">
                        <strong style="color: var(--primary);">16. Tricyclics in Elderly</strong><br>
                        <span style="color: var(--text-light); font-size: 0.9rem;">Preferred: Avoid due to anticholinergic effects</span>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 12px; border-left: 4px solid var(--primary); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);">
                        <strong style="color: var(--primary);">17. Macrolides + QT</strong><br>
                        <span style="color: var(--text-light); font-size: 0.9rem;">Preferred: Warn of arrhythmia risk</span>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 12px; border-left: 4px solid var(--primary); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);">
                        <strong style="color: var(--primary);">18. Lithium Toxicity</strong><br>
                        <span style="color: var(--text-light); font-size: 0.9rem;">Preferred: Recognize early signs and management</span>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 12px; border-left: 4px solid var(--primary); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);">
                        <strong style="color: var(--primary);">19. SSRI Discontinuation</strong><br>
                        <span style="color: var(--text-light); font-size: 0.9rem;">Preferred: Gradual taper to avoid syndrome</span>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 12px; border-left: 4px solid var(--primary); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);">
                        <strong style="color: var(--primary);">20. Herbal Supplements</strong><br>
                        <span style="color: var(--text-light); font-size: 0.9rem;">Preferred: Warn of St. John's Wort interactions</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Bradley-Terry Loss -->
        <section class="section">
            <h2>Section 3: Bradley-Terry Loss - RM Training Math</h2>

            <div class="bt-visualization">
                <h3 style="color: #581c87; margin-top: 0;">üî¨ Mathematical Foundation</h3>
                
                <p style="color: #581c87; margin-bottom: 20px;">
                    The RM is trained to predict human preferences using <strong>Bradley-Terry loss</strong>, which assumes preferences follow a logistic distribution:
                </p>

                <div class="formula-box" style="background: white; border: 2px solid #8b5cf6;">
P(prefer y_w over y_l | x) = œÉ(r_RM(x,y_w) - r_RM(x,y_l))<br>
= 1 / (1 + exp(-(r_RM(x,y_w) - r_RM(x,y_l))))
                </div>

                <p style="color: #581c87; margin-bottom: 15px; margin-top: 20px;">
                    The RM loss (cross-entropy on preference probability):
                </p>

                <div class="formula-box" style="background: white; border: 2px solid #8b5cf6;">
L_RM = -E[log œÉ(r_RM(x,y_w) - r_RM(x,y_l))]<br><br>
Gradient: ‚àáL ‚àù (œÉ(diff) - 1) * ‚àár_w + (1 - œÉ(diff)) * ‚àár_l
                </div>

                <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 3px solid #8b5cf6;">
                    <strong style="color: #581c87;">üéØ What This Means:</strong><br>
                    <span style="color: var(--text); font-size: 0.9rem; line-height: 1.7;">
                        If œÉ(diff) < 1 (model underfits preference): gradients push r_w (preferred) UP and r_l (dispreferred) DOWN until the margin increases and œÉ(diff) ‚Üí 1 (high confidence preference).
                    </span>
                </div>
            </div>

            <div style="background: linear-gradient(135deg, #ecfdf5 0%, #dcfce7 100%); padding: 25px; border-radius: 12px; border-left: 4px solid var(--success); margin-top: 25px;">
                <h3 style="color: #065f46; margin-top: 0;">‚úÖ Intuitive Explanation</h3>
                <p style="color: #065f46; margin-bottom: 15px;">
                    Imagine you have two responses to a query:
                </p>
                <ul style="color: #065f46; list-style: none;">
                    <li style="margin: 10px 0;">üìä <strong>Response A (preferred):</strong> Has excellent clinical reasoning, specific dosing</li>
                    <li style="margin: 10px 0;">üìä <strong>Response B (dispreferred):</strong> Is vague and potentially unsafe</li>
                </ul>
                <p style="color: #065f46; margin-top: 15px;">
                    The RM learns to give A a high score and B a low score. The margin between them should be large enough that the model is confident about the preference. Bradley-Terry loss encourages exactly this behavior.
                </p>
            </div>
        </section>

        <!-- Section 4: Training Dynamics -->
        <section class="section">
            <h2>Section 4: RM Training Dynamics - Numerical Example</h2>

            <p style="margin-bottom: 25px; color: var(--text-light);">
                Here's how the Reward Model evolves during training on dosing preference pairs:
            </p>

            <table class="training-table">
                <thead>
                    <tr>
                        <th>Epoch</th>
                        <th>r(Preferred)</th>
                        <th>r(Dispreferred)</th>
                        <th>Margin</th>
                        <th>œÉ(margin)</th>
                        <th>Loss</th>
                        <th>Accuracy %</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>0 (init)</strong></td>
                        <td class="metric-neutral">0.12</td>
                        <td class="metric-neutral">-0.08</td>
                        <td class="metric-neutral">0.20</td>
                        <td class="metric-warning">0.550</td>
                        <td class="metric-warning">0.693</td>
                        <td class="metric-warning">51.2%</td>
                    </tr>
                    <tr>
                        <td><strong>50</strong></td>
                        <td class="metric-good">2.34</td>
                        <td class="metric-good">-0.87</td>
                        <td class="metric-good">3.21</td>
                        <td class="metric-good">0.961</td>
                        <td class="metric-good">0.087</td>
                        <td class="metric-good">72.4%</td>
                    </tr>
                    <tr>
                        <td><strong>100</strong></td>
                        <td class="metric-good">3.45</td>
                        <td class="metric-good">-2.10</td>
                        <td class="metric-good">5.55</td>
                        <td class="metric-good">0.996</td>
                        <td class="metric-good">0.020</td>
                        <td class="metric-good">79.3%</td>
                    </tr>
                    <tr>
                        <td><strong>500</strong></td>
                        <td class="metric-good">5.12</td>
                        <td class="metric-good">-4.56</td>
                        <td class="metric-good">9.68</td>
                        <td class="metric-good">0.9994</td>
                        <td class="metric-good">0.0031</td>
                        <td class="metric-good">84.1%</td>
                    </tr>
                </tbody>
            </table>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-top: 30px;">
                <div style="background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); padding: 25px; border-radius: 12px; border-left: 4px solid var(--success);">
                    <h3 style="color: #065f46; margin-top: 0;">üìà What's Happening</h3>
                    <ul style="color: #065f46; list-style: none;">
                        <li style="margin: 10px 0;">‚úì Margin grows from 0.20 ‚Üí 9.68</li>
                        <li style="margin: 10px 0;">‚úì Confidence œÉ grows: 55% ‚Üí 99.94%</li>
                        <li style="margin: 10px 0;">‚úì Loss drops: 0.693 ‚Üí 0.0031</li>
                        <li style="margin: 10px 0;">‚úì Accuracy rises: 51% ‚Üí 84%</li>
                    </ul>
                </div>

                <div style="background: linear-gradient(135deg, #fef3c7 0%, #fef08a 100%); padding: 25px; border-radius: 12px; border-left: 4px solid var(--accent);">
                    <h3 style="color: #92400e; margin-top: 0;">üí° Key Insights</h3>
                    <p style="color: #92400e; font-size: 0.95rem; line-height: 1.7;">
                        By epoch 500, the margin is 9.68, meaning œÉ(9.68) = 99.94%. The RM is extremely confident that the preferred response truly is better. Test accuracy: ~84%.
                    </p>
                </div>
            </div>

            <div class="insight-box">
                <div class="insight-title">üí° Convergence Pattern</div>
                <div class="insight-text">
                    The RM rapidly learns to separate preferred from dispreferred responses. Most of the learning happens in the first 100 epochs. By 500 epochs, performance plateaus at ~84% test accuracy‚Äîthis is realistic for preference learning (humans don't always agree perfectly).
                </div>
            </div>
        </section>

        <!-- Section 5: Elo Rating System -->
        <section class="section">
            <h2>Section 5: Elo Rating System for Response Ranking</h2>

            <div style="background: linear-gradient(135deg, #fef3c7 0%, #fef08a 100%); padding: 25px; border-radius: 12px; border-left: 4px solid var(--accent); margin-bottom: 30px;">
                <h3 style="color: #92400e; margin-top: 0;">‚ôüÔ∏è From Chess to LLMs</h3>
                <p style="color: #92400e; margin-bottom: 15px;">
                    The Elo rating system, famous from chess, can be adapted to rank LLMs based on comparative preference judgments:
                </p>
                <div class="formula-box" style="background: white; border-left: 3px solid #f59e0b;">
Elo_new = Elo_old + K √ó (actual_outcome - expected_win_probability)
                </div>
            </div>

            <div class="elo-container">
                <div class="elo-card">
                    <div class="model-name">PharmGPT-v1</div>
                    <div class="elo-rating">1610.6</div>
                    <div style="border-bottom: 1px solid var(--gray-200); padding-bottom: 15px; margin-bottom: 15px;">
                        <div class="elo-stat">
                            <span>Opponent</span>
                            <strong>MedLLM-3</strong>
                        </div>
                        <div class="elo-stat">
                            <span>Opponent Elo</span>
                            <strong>1400</strong>
                        </div>
                    </div>
                    <div style="border-bottom: 1px solid var(--gray-200); padding-bottom: 15px; margin-bottom: 15px;">
                        <div class="elo-stat">
                            <span>Expected Win %</span>
                            <strong>67%</strong>
                        </div>
                        <div class="elo-stat">
                            <span>Result</span>
                            <strong style="color: var(--success);">WIN</strong>
                        </div>
                    </div>
                    <div class="elo-change">
                        +10.6 (as predicted)
                    </div>
                </div>

                <div class="elo-card">
                    <div class="model-name">MedLLM-3</div>
                    <div class="elo-rating">1389.4</div>
                    <div style="border-bottom: 1px solid var(--gray-200); padding-bottom: 15px; margin-bottom: 15px;">
                        <div class="elo-stat">
                            <span>Opponent</span>
                            <strong>PharmGPT-v1</strong>
                        </div>
                        <div class="elo-stat">
                            <span>Opponent Elo</span>
                            <strong>1610</strong>
                        </div>
                    </div>
                    <div style="border-bottom: 1px solid var(--gray-200); padding-bottom: 15px; margin-bottom: 15px;">
                        <div class="elo-stat">
                            <span>Expected Win %</span>
                            <strong>33%</strong>
                        </div>
                        <div class="elo-stat">
                            <span>Result</span>
                            <strong style="color: var(--danger);">LOSS</strong>
                        </div>
                    </div>
                    <div class="elo-change" style="background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%); color: var(--danger);">
                        -10.6 (as expected)
                    </div>
                </div>

                <div class="elo-card">
                    <div class="model-name">PharmGPT-v2</div>
                    <div class="elo-rating">1473.4</div>
                    <div style="border-bottom: 1px solid var(--gray-200); padding-bottom: 15px; margin-bottom: 15px;">
                        <div class="elo-stat">
                            <span>Opponent</span>
                            <strong>PharmGPT-v1</strong>
                        </div>
                        <div class="elo-stat">
                            <span>Opponent Elo</span>
                            <strong>1610</strong>
                        </div>
                    </div>
                    <div style="border-bottom: 1px solid var(--gray-200); padding-bottom: 15px; margin-bottom: 15px;">
                        <div class="elo-stat">
                            <span>Expected Win %</span>
                            <strong>27%</strong>
                        </div>
                        <div class="elo-stat">
                            <span>Result</span>
                            <strong style="color: var(--success);">WIN!</strong>
                        </div>
                    </div>
                    <div class="elo-change">
                        +23.4 (upset victory!)
                    </div>
                </div>
            </div>

            <div class="insight-box">
                <div class="insight-title">üéØ Interpretation</div>
                <div class="insight-text">
                    PharmGPT-v2 defeats the favored opponent (Elo 1610), gaining significant rating (+23.4). This indicates v2 is superior to v1 in pharmaceutical guidance quality. The system automatically captures relative model performance.
                </div>
            </div>
        </section>

        <!-- Section 6: PPO Optimization -->
        <section class="section">
            <h2>Section 6: Policy Optimization via PPO</h2>

            <div style="background: linear-gradient(135deg, #e0f2fe 0%, #dbeafe 100%); padding: 25px; border-radius: 12px; border-left: 4px solid var(--primary-light); margin-bottom: 30px;">
                <h3 style="color: var(--primary-dark); margin-top: 0;">üéØ The Optimization Objective</h3>
                
                <div class="formula-box" style="background: white; border-left: 3px solid var(--primary);">
max_œÄ E_x[E_{y~œÄ(¬∑|x)}[r_RM(x,y)]] - Œ≤*KL(œÄ(y|x) || œÄ_ref(y|x))
                </div>

                <p style="color: var(--primary-dark); margin-top: 15px; line-height: 1.7;">
                    <strong>Maximize</strong> expected reward (use RM to find high-scoring responses)<br>
                    <strong>While staying close</strong> to SFT reference model (KL divergence penalty)<br>
                    <strong>Œ≤ parameter</strong> controls stability vs improvement tradeoff
                </p>
            </div>

            <h3 style="margin-top: 40px;">PPO Training Iteration Results</h3>

            <table class="training-table">
                <thead>
                    <tr>
                        <th>PPO Step</th>
                        <th>Avg Reward</th>
                        <th>KL Div</th>
                        <th>Expert Score</th>
                        <th>Safety %</th>
                        <th>Specificity %</th>
                        <th>Dose Accuracy</th>
                        <th>Overall Score</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>0 (SFT)</strong></td>
                        <td class="metric-neutral">3.21</td>
                        <td class="metric-neutral">0.00</td>
                        <td class="metric-neutral">67%</td>
                        <td class="metric-neutral">82%</td>
                        <td class="metric-neutral">74%</td>
                        <td class="metric-neutral">78%</td>
                        <td class="metric-neutral">72%</td>
                    </tr>
                    <tr>
                        <td><strong>5000</strong></td>
                        <td class="metric-good">4.56</td>
                        <td class="metric-good">2.13</td>
                        <td class="metric-good">79%</td>
                        <td class="metric-good">91%</td>
                        <td class="metric-good">86%</td>
                        <td class="metric-good">87%</td>
                        <td class="metric-good">81%</td>
                    </tr>
                    <tr>
                        <td><strong>10000</strong></td>
                        <td class="metric-good">5.18</td>
                        <td class="metric-good">3.47</td>
                        <td class="metric-good">84%</td>
                        <td class="metric-good">94%</td>
                        <td class="metric-good">89%</td>
                        <td class="metric-good">91%</td>
                        <td class="metric-good">88%</td>
                    </tr>
                </tbody>
            </table>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; margin-top: 40px;">
                <div class="metric-card">
                    <div class="metric-value">+42%</div>
                    <div class="metric-label">Reward Improvement</div>
                    <div class="metric-change">3.21 ‚Üí 5.18 over 10k steps</div>
                </div>

                <div class="metric-card">
                    <div class="metric-value">+12%</div>
                    <div class="metric-label">Safety Improvement</div>
                    <div class="metric-change">82% ‚Üí 94% accuracy</div>
                </div>

                <div class="metric-card">
                    <div class="metric-value">+13%</div>
                    <div class="metric-label">Overall Quality</div>
                    <div class="metric-change">72% ‚Üí 88% expert score</div>
                </div>

                <div class="metric-card">
                    <div class="metric-value">3.47</div>
                    <div class="metric-label">Final KL Divergence</div>
                    <div class="metric-change">Stays close to SFT baseline</div>
                </div>
            </div>

            <div class="insight-box" style="margin-top: 30px;">
                <div class="insight-title">üìä What's Happening</div>
                <div class="insight-text">
                    <strong>Phase 1 (0 ‚Üí 5000):</strong> Large improvements as PPO exploits RM feedback. Safety jumps 82%‚Üí91%, reward 3.21‚Üí4.56.<br><br>
                    <strong>Phase 2 (5000 ‚Üí 10000):</strong> Continued but slower improvement. Reward plateaus near 5.18. KL divergence grows to 3.47 (model is diverging from SFT baseline but still controllable).<br><br>
                    <strong>Key Trade-off:</strong> High Œ≤ keeps KL low (stays safe) but limits reward. Low Œ≤ allows reward maximization but risks distribution shift.
                </div>
            </div>
        </section>

        <!-- Key Takeaways -->
        <section class="section" style="background: linear-gradient(135deg, #fef3c7 0%, #fef08a 100%); border-left: 6px solid var(--accent);">
            <h2 style="color: #92400e;">üéì Key Takeaways</h2>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-top: 30px;">
                <div style="background: white; padding: 25px; border-radius: 12px; border-left: 3px solid var(--accent);">
                    <strong style="color: #92400e; display: block; margin-bottom: 12px; font-size: 1.1rem;">1. Reward Models Capture Preferences</strong>
                    <p style="color: var(--text); font-size: 0.95rem;">
                        A simple neural network trained on 5k-50k preference pairs learns to predict human judgment on any new prompt-response pair. This generalizes well.
                    </p>
                </div>

                <div style="background: white; padding: 25px; border-radius: 12px; border-left: 3px solid var(--accent);">
                    <strong style="color: #92400e; display: block; margin-bottom: 12px; font-size: 1.1rem;">2. Bradley-Terry Loss is Elegant</strong>
                    <p style="color: var(--text); font-size: 0.95rem;">
                        The mathematical formulation is simple: maximize the probability that preferred responses score higher than dispreferred ones.
                    </p>
                </div>

                <div style="background: white; padding: 25px; border-radius: 12px; border-left: 3px solid var(--accent);">
                    <strong style="color: #92400e; display: block; margin-bottom: 12px; font-size: 1.1rem;">3. Training Dynamics Show Fast Convergence</strong>
                    <p style="color: var(--text); font-size: 0.95rem;">
                        RM learns rapidly: by epoch 100, accuracy reaches 79%. By epoch 500, confidence is 99.94%. Most learning happens early.
                    </p>
                </div>

                <div style="background: white; padding: 25px; border-radius: 12px; border-left: 3px solid var(--accent);">
                    <strong style="color: #92400e; display: block; margin-bottom: 12px; font-size: 1.1rem;">4. PPO Converts RM to Better LLM</strong>
                    <p style="color: var(--text); font-size: 0.95rem;">
                        Using the RM as a reward signal, PPO optimizes the LLM policy. Safety improves 12%, overall quality 16%.
                    </p>
                </div>

                <div style="background: white; padding: 25px; border-radius: 12px; border-left: 3px solid var(--accent);">
                    <strong style="color: #92400e; display: block; margin-bottom: 12px; font-size: 1.1rem;">5. Quality of Preferences Matters</strong>
                    <p style="color: var(--text); font-size: 0.95rem;">
                        Expert-annotated preferences (like the 20 pharmaceutical examples) are critical. GIGO: Garbage In, Garbage Out.
                    </p>
                </div>

                <div style="background: white; padding: 25px; border-radius: 12px; border-left: 3px solid var(--accent);">
                    <strong style="color: #92400e; display: block; margin-bottom: 12px; font-size: 1.1rem;">6. Stability-Performance Tradeoff</strong>
                    <p style="color: var(--text); font-size: 0.95rem;">
                        Œ≤ parameter in PPO controls this. High Œ≤ = stable but less improvement. Low Œ≤ = big gains but distribution shift risk.
                    </p>
                </div>
            </div>
        </section>

        <footer>
            <p>üöÄ This guide demonstrates the core mechanics of RLHF through detailed reward model training and policy optimization examples.</p>
            <p style="margin-top: 20px; font-size: 0.9rem;">Designed for pharmaceutical context ‚Ä¢ Understanding RLHF fundamentals</p>
        </footer>
    </div>

    <script>
        function switchTab(event, tabId) {
            event.preventDefault();
            
            // Hide all tabs
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(tab => tab.classList.remove('active'));
            
            // Remove active from all buttons
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(btn => btn.classList.remove('active'));
            
            // Show selected tab
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }
    </script>
</body>
</html>
